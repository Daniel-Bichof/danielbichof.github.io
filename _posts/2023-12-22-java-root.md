---
layout: post
title: Java (root way)
date: 2023-12-22
categories: [programming]
tags: [programming, java]     # TAG names should always be lowercase
---
---

# Diario de bordo (2023-12-22)

Aprendendo java, usando apenas o compilador via terminal e nvim como editor de texto

## Criando um arquivo 'main'

Criei um arquivo hello.java com a função main.

```java
class Hello{
    public static void main(String[] args){
        System.out.println("Hello, world");
    }
}
```

Para compilar o arquivo

```sh
javac hello.java
```

Adiocionando à um arquivo jar

```sh
jar cf hello.jar Hello.class
```

Para executar o arquivo JAR, digitei o seguinte comando:

```sh
java -classpath hello.jar Hello
```

O argumento -classpath (ou -cp) especifica o caminho da classe dentro
do arquivo jar. Por exemplo, em um caso em que a classe esteja
na pasta ./com/projeto/main, teria que declarar o
empacotamento da classe com a seguinte linha no começo do arquivo:

```java
package com.projeto.main;
// ...
```

Para compilar:

```sh
javac com/projeto/main/hello.java
jar cf programa.jar com/projeto/main/Hello.class
```

Aqui é passado o caminho da classe (classpath) declarada com `package`

```sh
java -cp programa.jar com.projeto.main.Hello
```

Note que é passado primeiro o arquivo jar criado
anteriormente e depois a classe main
(usado como em um `import`)

Caso passe o errado de uma classe ou uma classe que não
existe, o java deve retornar o seguinte erro:

``` sh
$ java -cp programa.jar com.learn.main.Hello

Error: Could not find or load main class com.learn.main.Hello
Caused by: java.lang.ClassNotFoundException: com.learn.main.Hello

```

Outro problema é se, mesmo passando o caminho correto da classe
mas explicitar o package de forma incorreta, o jdk deve retornar o erro:

```sh
$ java -cp programa.jar com.projeto.main.Hello

Error: Could not find or load main class com.projeto.main.Hello
Caused by: java.lang.NoClassDefFoundError: com/learn/main/Hello (wrong name: com/projeto/main/Hello)

```

Nesse caso a declaração do pacote java esta como:

```java
package com.learn.main;
```

Como a pasta learn não existe, o java não encontra a classe
